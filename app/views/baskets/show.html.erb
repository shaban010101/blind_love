<div class="container"> 
<% if @basket_items.empty? %>
  <p> Add some products this is empty.... </p>
<% else %> 
    <table class="table table-hover">
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>Size</th>
        <th>Quantity</th>
        <th></th>
        <th></th>
      </tr>
      <tr>
        <% @basket_items.each do |item| %>
          <td><p><%= link_to item.product.name, department_category_product_path(item.product.department.slug, item.product.category.slug, item.product.name.downcase) %></p></td>
          <td><p><%= number_to_currency(item.price_times_quantity, :unit => "&pound") %></p></td>
          <td><p><%= item.sizing.size.size_name %></p></td>
          <td><p><%= form_for(@basket_items, :url => {:action => "update_basket_item", :method => "put"}) do |f|  %>
            <%= f.hidden_field(:id, :key => item.id) %>
            <%= f.hidden_field(:product_id,:key => item.product.id) %>
            <%= f.hidden_field(:sizing_id,:key => item.sizing_id ) %>
            <% quant = item.sizing.quantity %>
            <%= f.number_field(:quantity, :in => 1..quant, :class => "input-mini") %></p></td>
          <td><%= f.submit "Update", :class => "btn" %></td>
          <% end %></td>
          <td><%= button_to 'Remove', basket_item_path(item.id), :method => 'delete', :confirm => 'Are you sure?', :class => "btn" %></td>
        </tr>
        <% end %>
         <tr>
          <td><p class="text-info">Total  <%= number_to_currency(@basket_items.product_totals(@basket.id), :unit => "&pound") %><p></td>
          <td><%= link_to "Purchase products", new_order_path, :class => "btn" %></td>
        </tr>
    </table>
  </div>
<% end %>